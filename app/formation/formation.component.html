<div  class="container">


  <div class="text-danger">
    <ng-template #errors>
      {{errorMessage}}
    </ng-template>
  </div>

  <div *ngIf="Formations; else errors ">
    <div class="mt-4" style="border-bottom:solid #dcdce3 ">
      <h1 class="titre"> Gestion des Formations </h1>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <form [formGroup]="serchFormGroup" (ngSubmit)="handlsearchFormatio()" style="margin-bottom: 40px">
        <div class="input-group">
          <input formControlName="keyword" type="text" class="form-control" placeholder="Rechercher une formation..." aria-label="Recherche">
          <div class="input-group-append">
            <button (click)="handlsearchFormatio()" class="btn btn-primary" type="submit">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </form>
      <!-- d-none : cacher l'élément ,d-sm-block : fficher en block dès que l'écran ≥ 576px (taille sm)  -->
      <div   class="d-none d-sm-block"  >
        <button routerLink="/newFormation"  style="border-radius: 5px;"   class="btn btn-primary   ">
          <span    class="icon">+</span>
          <!-- Texte normal "Ajouter" -->
          <span   class="d-sm-inline d-md-none">Ajouter</span>
          <!-- Texte pour grand écran "Ajouter une formation" -->
          <span  class="d-none d-md-inline">Ajouter une formation</span>
        </button>

      </div>

      <div     class="d-block d-sm-none">
        <button  routerLink="/newFormation" style="border-radius: 5px;" class="btn btn-primary">
          <i class='bx bx-plus'></i>
        </button>
      </div>



    </div>

    <div class="formations-container">

      <div class="formations-container">







        <div *ngFor="let F of Formations" class="formation-card">
          <h2>{{F.formationName}}</h2>
          <p class="ecole">{{F.schoolName}}</p>


          <h3>Modules :</h3>

          <ul *ngFor="let M of  F.modules" class="module-list">

            <li> hello {{ M.name || 'Nom non disponible' }}</li>

          </ul>


          <div class="d-flex justify-content-center gap-3 mt-4">
            <!-- Bouton "Éditer" avec icône -->
            <button routerLink="/newFormation" [queryParams]="{ id: F.formationId }" style="border-radius: 5px;" class="btn btn-primary btn-sm btn-action">
              <i class="fas fa-edit"></i> <!-- Icône pour "Éditer" -->
            </button>

            <!-- Bouton "Supprimer" avec icône -->
            <button style="border-radius: 5px;"  (click)="handleDeleteFormation(F)" class="btn btn-danger btn-sm btn-action">
              <i class="fas fa-trash-alt"></i> <!-- Icône pour "Supprimer" -->
            </button>

            <!-- Bouton "View" avec icône -->
            <button  routerLink="/detailFormation" [queryParams]="{ id: F.formationId }" style="border-radius: 5px;"  class="btn btn-secondary btn-sm btn-action">
              <i class="fas fa-eye"></i> <!-- Icône pour "Voir" -->
            </button>
          </div>


        </div>




      </div>

    </div>



  </div>
</div>


<div class="container align-content-center ">
  <ul class="nav nav-pills me-3">
    <li *ngFor="let item of [].constructor(this.totalPages); let i = index">
      <a
        (click)="gotoPage(i)"
        style="border-radius: 5px;"
        class="btn mt-4 ms-3"
        [ngClass]="{'btn-primary': currentPage === i, 'btn-outline-primary': currentPage !== i}"
      >
        {{ i }}
      </a>
    </li>
  </ul>
</div>






